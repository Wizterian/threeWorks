include ./_variable

//- ページ固有変数
block pageState
  -
    var pageState = {
      updateTimeStamp: globalState.updateTimeStamp,
      title: globalState.title,
      description: globalState.description,
      url: globalState.websiteUrl
    }

//- LayoutComponent
doctype html
html(lang="ja-JP")
  head
    meta(charset="utf-8")
    meta(http-equiv="X-UA-Compatible", content="IE=edge")
    meta(name="viewport", content="width=device-width")
    meta(name="format-detection", content="telephone=no, email=no, address=no")
    meta(name="robots", content="index, follow")
    meta(name="rating", content="general")
    meta(name="author", content="mixi")
    meta(name="copyright", content!="&copy;XFLAG")
    block keywords
      meta(name="keywords", content=globalState.keywords)
    block description
      meta(name="description", content=pageState.description)
    block ogurl
      meta(property="og:url", content=globalState.ogurl)
    meta(property="og:type", content="website")
    block ogtitle
      meta(property="og:title" content=pageState.title)
    block ogimg
      meta(property="og:image", content=globalState.ogImage)
    block ogdescription
      meta(property="og:description", content=pageState.description)
    block ogsitename
      meta(property="og:site_name", content=globalState.ogSiteName)

    block twittercard
      meta(name="twitter:card", content="summary_large_image")
      meta(name="twitter:image", content=globalState.ogImage)

    block apptitle
      meta(name="apple-mobile-web-app-title", content=globalState.apptitle)

    block title
      title #{pageState.title}

    link(rel="shortcut icon", href=`${globalState.websiteDir}favicon.ico`)

    block appletouchicon
      link(rel="apple-touch-icon", href=`${globalState.websiteDir}apple-touch-icon.png`)

    link(
      rel="stylesheet",
      href=`${globalState.websiteDir}assets/common/css/common.css?${globalState.updateTimeStamp}`
    )
    block page_stylesheet

    //- json-ld
    block json-ld

    script.
      this.app = {
        commonData:{
          website: '#{globalState.websiteUrl}',
          share: [{
            text: `#{globalState.share.text}`,
            url: ''
          }]
        }
      };

    block page_script_head

  body

    block body_start

    block header
      <!--#include virtual="#{globalState.websiteDir}assets/common/inc/header.html" -->

    .co-bg

      noscript
        include ./parts/_noscript

      block main

      block footer
        <!--#include virtual="#{globalState.websiteDir}assets/common/inc/footer.html" -->

      //- block pagetop

      block body_end

    script(src=`${globalState.websiteDir}assets/common/js/main.js?${globalState.updateTimeStamp}` deffer)
    block page_script_bottom
